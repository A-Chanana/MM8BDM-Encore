actor EncoreKaonaGeeno : KaonaGeeno 28497
{
//$Category MM8BDME-Props
Translation "4:4=38:38", "197:197=3:3"
States
{
Spawn:
KAON A 100
KAON A 1 A_Jump(128, "Flip")
loop
Flip:
KAON B 0 A_SpawnItemEx("EncoreKaonaGeenoHead", -1, 0, 32, 0, 0, 15)
KAON BCD 4
HeadWait:
KAON E 18
Goto Spawn
}
}

actor EncoreKaonaGeenoHead : KaonaGeenoHead
{
Translation "4:4=38:38", "197:197=3:3"
}


actor EncoreChillIceCube : ChillIceCube 28498
{
//$Category MM8BDME-Interactive Props
//$Arg0 Breakage
//$Arg0Enum { 0 = "Whole"; 1 = "Broken"; }
//$Arg0Type 11
	States
	{
	Spawn:
		ECHL A 1
		ECHL A 0 A_JumpIf(args[0]>0, "BrokenVar")
		ECHL A 0 A_SpawnItemEx("EncoreChillBlockDetect", 0, 0, 64)
	SpawnLoop:
		ECHL A 6 A_JumpIfInventory("EncoreChillBlockFlag", 1, "Pain")
		loop
	Spawn2:
		ECHL B 50
		ECHL B 0 A_SpawnItemEx("EncoreChillBlockDetect", 0, 0, 64)
	SpawnLoop2:
		ECHL B 6 A_JumpIfInventory("EncoreChillBlockFlag", 1, "Pain")
		loop
	Pain:
		ECHL A 0 A_JumpIfInventory("CutterFlag", 1, "Broken")
		ECHL A 0 A_PlaySound("weapon/ChillBlockCrack",1,0.5)
		ECHL A 1 A_GiveInventory("CutterFlag", 1)
		ECHL A 0 A_TakeInventory("EncoreChillBlockFlag", 1)
		Goto Spawn2
	Broken:
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)
		TNT1 AAAAA 0 A_SpawnItemEx("EncoreChillIceCubeShard",0,0,0,random(1,5),random(-10,10),random(8,12),random(-5,5)) 
		TNT1 A 0 A_PlaySound("weapon/ChillBlockBreak",1,0.5)
	Respawning: 
		TNT1 A 280 A_ChangeFlag("SOLID", 0)
		TNT1 A 90 A_SpawnItemEX("EncoreChillIceCubeRespawnFX")
		TNT1 A 1 A_SpawnItemEx("EncoreChillIceCubeRespawnCheck")
		TNT1 A 0 A_JumpIfInventory("BossHealth2", 1, "Respawned")
		loop
	Respawned:
		TNT1 A 0 A_TakeInventory("EncoreChillBlockFlag", 1)
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", 1)
		ECHL A 0 A_ChangeFlag("SOLID", 1)
		TNT1 A 0 A_PlaySound("misc/SpawnIn",1,0.5)
		TFOG A 3 A_TakeInventory("BossHealth2", 999)
		TFOG CB 2
		TNT1 A 0 A_TakeInventory("CutterFlag", 999)
		ECHL A 1
		Goto Spawn
	BrokenVar:
		ECHL A 0 A_SpawnItemEx("HalfBrokenEncoreChillIceCube")
		stop
	}
}

actor HalfBrokenEncoreChillIceCube : EncoreChillIceCube
{
	States
	{
	Spawn:
		ECHL B 1
		ECHL B 0 A_SpawnItemEx("EncoreChillBlockDetect", 0, 0, 64)
	SpawnLoop:
		ECHL B 6 A_JumpIfInventory("EncoreChillBlockFlag", 1, "Pain")
		loop
	Pain:
		ECHL B 0 A_PlaySound("weapon/ChillBlockCrack",1,0.5)
		Goto Broken
	Broken:
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", 0)
		TNT1 AAAAA 0 A_SpawnItemEx("EncoreChillIceCubeShard",0,0,0,random(1,5),random(-10,10),random(8,12),random(-5,5)) 
		TNT1 A 0 A_PlaySound("weapon/ChillBlockBreak",1,0.5)
	Respawning: 
		TNT1 A 280 A_ChangeFlag("SOLID", 0)
		TNT1 A 90 A_SpawnItemEX("EncoreChillIceCubeRespawnFX")
		TNT1 A 1 A_SpawnItemEx("EncoreChillIceCubeRespawnCheck")
		TNT1 A 0 A_JumpIfInventory("BossHealth2", 1, "Respawned")
		loop
	Respawned:
		TNT1 A 0 A_TakeInventory("EncoreChillBlockFlag", 1)
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", 1)
		ECHL A 0 A_ChangeFlag("SOLID", 1)
		TNT1 A 0 A_PlaySound("misc/SpawnIn",1,0.5)
		TFOG A 3 A_TakeInventory("BossHealth2", 999)
		TFOG CB 2
		TNT1 A 0 A_TakeInventory("CutterFlag", 999)
		ECHL A 1
		Goto Spawn
	}
}

actor EncoreChillIceCubeRespawnCheck : ChillIceCubeRespawnCheck
{

States
{
	Spawn:
	TNT1 A 1
	TNT1 A 1 A_GiveInventory("BossHealth2", 1, AAPTR_TARGET)
	stop
	Death:
	TNT1 A 0 A_SpawnItemEx("ChillIceCubeRespawnDamager")
	TNT1 AAAAA 0 A_SpawnItemEx("EncoreChillIceCubeShard",0,0,0,random(1,5),random(-10,10),random(8,12),random(-5,5)) 
	stop	
}
}

actor EncoreChillBlockDetect : SheepBlockDetect
{
	species "IceCube"
	radius 15
	height 5
	States
	{
	Spawn:
		PLAY A 1
		PLAY A 0 A_CheckFlag(SOLID, "Spawn", AAPTR_TARGET)
		goto Death
	Death:
		TNT1 A 0 A_GiveToTarget("EncoreChillBlockFlag", 1)
	End:
		TNT1 A 0
		stop
	}
}

actor EncoreChillBlockFlag : Inventory
{
	inventory.amount 1
	inventory.maxamount 1
}

actor EncoreChillIceCubeShard : ChillIceCubeShard
{
Translation "69:69=36:36"
}

actor EncoreChillIceCubeRespawnFX : ChillIceCubeRespawnFX
{
Translation "74:74=3:3", "197:197=38:38", "196:196=34:34"
}
